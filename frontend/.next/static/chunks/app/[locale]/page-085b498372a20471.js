(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{1131:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m,EM:()=>l,NF:()=>c,O5:()=>i,U7:()=>x,V8:()=>o,eO:()=>r,tS:()=>d});var a=s(5555);let n=a.A.create({baseURL:"/api",withCredentials:!1});function i(e){e?n.defaults.headers.common.Authorization="Bearer ".concat(e):delete n.defaults.headers.common.Authorization}let l=async e=>(await n.get("/pools/info",{params:{user_id:e}})).data.pools,r=async()=>(await n.get("/user/profile")).data,c=async(e,t,s)=>n.post("/reinvest/settings",{user_id:e,pool_name:t,enabled:s}),o=async(e,t,s,n)=>(await a.A.post("/api/invest",{amount:e,pool_name:t,use_balance:s,user_id:n})).data,d=async(e,t,s,a,i)=>(await n.post("/withdraw",{user_id:i,source:"investment",amount:e,method:a,mode:s,pool_name:t,details:t})).data;async function x(e){let t=await fetch("/api/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).detail||"Withdraw error");return t.json()}let m=n},1362:(e,t,s)=>{"use strict";s.d(t,{P:()=>a});let a=(0,s(3879).v)(e=>({token:null,setToken:t=>e({token:t}),profitUsd:0,setProfitUsd:t=>e({profitUsd:t})}))},3960:(e,t,s)=>{Promise.resolve().then(s.bind(s,4858))},4858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(5155),n=s(2115),i=s(7652),l=s(1362),r=s(1131),c=s(9137),o=s.n(c),d=s(7576);let x=e=>{let{pool:t,onInvest:s,onWithdraw:n,onToggleReinvest:l}=e,r=(0,i.c3)(),[c,x]=t.yield_range,m=t.user_balance>0;return(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c rounded-2xl bg-zinc-900 border border-zinc-800 px-4 py-3 shadow-sm space-y-2",children:[(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"jsx-ff5dd3c04651647c text-white font-semibold text-base",children:t.name}),(0,a.jsxs)("span",{className:"jsx-ff5dd3c04651647c text-sm text-blue-400",children:[c.toFixed(2),"% – ",x.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c text-sm text-zinc-400",children:[r("poolCard.minDeposit"),": ",(0,a.jsxs)("span",{className:"jsx-ff5dd3c04651647c text-white",children:["$",t.min_invest]})]}),(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c text-sm text-zinc-400",children:[r("poolCard.balance"),": ",(0,a.jsxs)("span",{className:"jsx-ff5dd3c04651647c text-white",children:["$",t.user_balance]})]}),l&&(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c flex items-center justify-between text-sm pt-1",children:[(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c text-white",children:r("poolCard.autoReinvest")}),(0,a.jsxs)("label",{className:"jsx-ff5dd3c04651647c inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.reinvest,onChange:e=>l(t,e.target.checked),className:"jsx-ff5dd3c04651647c sr-only peer"}),(0,a.jsx)("div",{className:"jsx-ff5dd3c04651647c w-10 h-5 bg-gray-600 peer-checked:bg-blue-500 rounded-full transition-all relative",children:(0,a.jsx)("div",{className:"jsx-ff5dd3c04651647c "+((0,d.A)("absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-all",t.reinvest&&"translate-x-5")||"")})})]})]}),(0,a.jsxs)("div",{className:"jsx-ff5dd3c04651647c flex mt-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>s(t),className:"jsx-ff5dd3c04651647c "+((0,d.A)("relative overflow-hidden bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 rounded-xl transition w-full")||""),children:[(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c relative z-10",children:r("poolCard.invest")}),(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-xl"}),(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c absolute top-0 left-0 h-full w-6 bg-white/40 blur-sm animate-glint-fast"})]}),m&&n&&(0,a.jsxs)("button",{onClick:()=>n(t),className:"jsx-ff5dd3c04651647c relative overflow-hidden px-3 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-xl text-white text-sm transition",children:[(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c relative z-10",children:"−"}),(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-xl"}),(0,a.jsx)("span",{className:"jsx-ff5dd3c04651647c absolute top-0 left-0 h-full w-6 bg-white/40 blur-sm animate-glint-fast"})]})]}),(0,a.jsx)(o(),{id:"ff5dd3c04651647c",children:"@-webkit-keyframes glint-fast{0%{-webkit-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-webkit-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@-moz-keyframes glint-fast{0%{-moz-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-moz-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@-o-keyframes glint-fast{0%{-o-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-o-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@keyframes glint-fast{0%{-webkit-transform:translatex(-100%)skewx(-20deg);-moz-transform:translatex(-100%)skewx(-20deg);-o-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-webkit-transform:translatex(200%)skewx(-20deg);-moz-transform:translatex(200%)skewx(-20deg);-o-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}.animate-glint-fast.jsx-ff5dd3c04651647c{-webkit-animation:glint-fast 2s linear infinite;-moz-animation:glint-fast 2s linear infinite;-o-animation:glint-fast 2s linear infinite;animation:glint-fast 2s linear infinite}"})]})};var m=s(6766);let u=e=>{let{balanceUsd:t=0,onWithdraw:s,onLanguageSwitch:n}=e,l=(0,i.c3)();return(0,a.jsxs)("div",{className:"jsx-697083ee59dfe68b relative flex items-center justify-between px-4 py-3 bg-zinc-900 border-b border-zinc-800",children:[(0,a.jsx)("button",{onClick:n,"aria-label":l("common.switchLanguage"),className:"jsx-697083ee59dfe68b hover:opacity-80 transition",children:(0,a.jsx)(m.default,{src:"/images/logo.png",alt:"logo",width:36,height:36,className:"rounded-md"})}),(0,a.jsxs)("div",{className:"jsx-697083ee59dfe68b absolute left-1/2 -translate-x-1/2 text-white text-sm font-medium",children:[l("common.balance"),": "," ",(0,a.jsxs)("span",{className:"jsx-697083ee59dfe68b text-green-400 font-semibold",children:["$",t.toFixed(2)]})]}),(0,a.jsxs)("button",{onClick:s,className:"jsx-697083ee59dfe68b relative overflow-hidden bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-1.5 rounded-xl transition",children:[(0,a.jsx)("span",{className:"jsx-697083ee59dfe68b relative z-10",children:l("common.withdraw")}),(0,a.jsx)("span",{className:"jsx-697083ee59dfe68b absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent rounded-xl"}),(0,a.jsx)("span",{className:"jsx-697083ee59dfe68b absolute top-0 left-0 h-full w-8 bg-white/40 blur-sm animate-glint"})]}),(0,a.jsx)(o(),{id:"697083ee59dfe68b",children:"@-webkit-keyframes glint{0%{-webkit-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-webkit-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@-moz-keyframes glint{0%{-moz-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-moz-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@-o-keyframes glint{0%{-o-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-o-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}@keyframes glint{0%{-webkit-transform:translatex(-100%)skewx(-20deg);-moz-transform:translatex(-100%)skewx(-20deg);-o-transform:translatex(-100%)skewx(-20deg);transform:translatex(-100%)skewx(-20deg);opacity:0}50%{opacity:1}100%{-webkit-transform:translatex(200%)skewx(-20deg);-moz-transform:translatex(200%)skewx(-20deg);-o-transform:translatex(200%)skewx(-20deg);transform:translatex(200%)skewx(-20deg);opacity:0}}.animate-glint.jsx-697083ee59dfe68b{-webkit-animation:glint 3s ease-in-out infinite;-moz-animation:glint 3s ease-in-out infinite;-o-animation:glint 3s ease-in-out infinite;animation:glint 3s ease-in-out infinite}"})]})};var h=s(1934);async function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";try{(await s.e(728).then(s.bind(s,7728))).default.HapticFeedback.impactOccurred(e)}catch(e){console.warn("vibration failed:",e)}}var p=s(7140),f=s(2820);let w=()=>{let{data:e,error:t,isLoading:s,mutate:a}=(0,p.Ay)("profile",r.eO,{revalidateOnFocus:!1});return{profile:e,userId:null==e?void 0:e.user_id,isLoading:s,error:t,mutate:a}};var g=s(2528),j=s(4673);let y=e=>{let{value:t,className:s="",iconSize:l=20,toastSuccess:r=!0}=e,c=(0,i.c3)("common"),[o,d]=(0,n.useState)(!1),x=async()=>{try{await navigator.clipboard.writeText(t),b(),r&&f.oR.success(c("copied")),d(!0),setTimeout(()=>d(!1),1600)}catch(e){f.oR.error(c("copy_error"))}};return(0,a.jsx)("button",{onClick:x,"aria-label":c("copy"),className:"transition text-white hover:text-blue-500 ".concat(s),children:o?(0,a.jsx)(g.A,{size:l,className:"text-green-400"}):(0,a.jsx)(j.A,{size:l})})},v=e=>{var t,s;let{amount:l,poolName:r,remainder:c,held:o,onClose:d,onContinue:x}=e,m=(0,i.c3)(),{userId:u,mutate:g}=w(),[j,v]=(0,n.useState)(null),[N,k]=(0,n.useState)(null),[z,_]=(0,n.useState)(!1),[C,S]=(0,n.useState)(null),[F,T]=(0,n.useState)({}),U=e=>fetch(e).then(e=>e.json()),{data:R}=(0,p.Ay)("/api/invest/payment_details",U),{data:A}=(0,p.Ay)("/api/invest/rates",U),D="ton"===j?"usdt_ton":"usdt"===j?N:j;(0,n.useEffect)(()=>{A&&T(A)},[A]),(0,n.useEffect)(()=>{var e,t;if(j&&F){if("card_ru"===j)return void S(c*(null!=(e=F.USDT_RUB)?e:0));if("usdt"===j&&N){let e=F["".concat(N.toUpperCase(),"_USD")],s=null!=(t=F.USDT_RUB)?t:0;e&&N.endsWith("rub")?S(c*s):e?S(c/e):S(null);return}if("trx"===j||"ton"===j){let e=F["".concat(j.toUpperCase(),"_USD")];e?S(c/e):S(null);return}}},[j,N,F,c]);let E=async()=>{if(!j||"usdt"===j&&!N||!u)return;b(),_(!0);let e="usdt"===j?N:"ton"===j?"usdt_ton":j;try{let t=await fetch("/api/invest/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:u,pool_name:r,amount_usd:c,currency:e,details:null==R?void 0:R[e]})}),s=await t.json();"request_created"===s.status?(f.oR.success(m("invest.request_sent")),S(s.amount_token),await g(),x(l,s.status)):f.oR.error("Не удалось создать заявку")}catch(e){console.error(e),f.oR.error("Ошибка. Попробуйте позже")}finally{_(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",children:(0,a.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-zinc-900 p-6 rounded-2xl border border-zinc-700 space-y-4",children:[(0,a.jsxs)("h2",{className:"text-white text-xl font-bold",children:[m("invest.confirm_title")," — ",r]}),(0,a.jsxs)("p",{className:"text-zinc-300 text-sm",children:[m("invest.to_pay"),": ",(0,a.jsxs)("span",{className:"text-white",children:["$",c.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(null==R?void 0:R.card_ru)&&(0,a.jsx)("button",{onClick:()=>{v("card_ru"),k(null)},className:"w-full px-4 py-2 rounded-2xl text-sm font-medium text-white border shadow-sm transition ".concat("card_ru"===j?"bg-blue-600 border-blue-500":"bg-zinc-900 border-zinc-700 hover:bg-zinc-800"),children:m("invest.currency.card_ru")}),(null==R?void 0:R.usdt_ton)&&(0,a.jsx)("button",{onClick:()=>{v("ton"),k(null)},className:"w-full px-4 py-2 rounded-2xl text-sm font-medium text-white border shadow-sm transition ".concat("ton"===j?"bg-blue-600 border-blue-500":"bg-zinc-900 border-zinc-700 hover:bg-zinc-800"),children:"TON"}),(0,a.jsx)("button",{onClick:()=>{v("usdt"),k(null)},className:"w-full px-4 py-2 rounded-2xl text-sm font-medium text-white border shadow-sm transition ".concat("usdt"===j?"bg-blue-600 border-blue-500":"bg-zinc-900 border-zinc-700 hover:bg-zinc-800"),children:"USDT"}),(null==R?void 0:R.trx)&&(0,a.jsx)("button",{onClick:()=>{v("trx"),k(null)},className:"w-full px-4 py-2 rounded-2xl text-sm font-medium text-white border shadow-sm transition ".concat("trx"===j?"bg-blue-600 border-blue-500":"bg-zinc-900 border-zinc-700 hover:bg-zinc-800"),children:"TRX"})]}),"usdt"===j&&(0,a.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:m("invest.choose_network")}),["usdt_ton","usdt_bep20"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:"w-full px-4 py-2 rounded-2xl text-sm font-medium text-white border shadow-sm transition ".concat(N===e?"bg-blue-600 border-blue-500":"bg-zinc-900 border-zinc-700 hover:bg-zinc-800"),children:m("invest.currency.".concat(e))},e))]}),D&&(0,a.jsxs)("div",{className:"bg-zinc-900 p-4 rounded-2xl text-sm text-white space-y-3 border border-zinc-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[m("invest.send_exact"),":\xa0",(0,a.jsx)("b",{children:null!==C?"".concat(C.toFixed(2)," ").concat("ton"===j?m("invest.currency.ton"):m("invest.currency.".concat(D))):"".concat(c.toFixed(2)," ").concat("ton"===j?m("invest.currency.ton"):m("invest.currency.".concat(D)))})]}),(0,a.jsx)(y,{value:null!==C?C.toFixed(2):c.toFixed(2),className:"ml-2 p-1",iconSize:16})]}),(0,a.jsxs)("div",{className:"break-all text-zinc-400 text-xs",children:[m("invest.send_to"),":",(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsx)("span",{className:"font-mono text-sm text-white mr-2",children:null!=(t=null==R?void 0:R[D])?t:""}),(0,a.jsx)(y,{value:null!=(s=null==R?void 0:R[D])?s:"",className:"p-1",iconSize:16})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:d,className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:m("common.cancel")}),(0,a.jsx)("button",{onClick:E,disabled:!j||"usdt"===j&&!N||z,className:"w-1/2 px-4 py-2 rounded-xl text-sm text-white transition ".concat(j&&("usdt"!==j||N)&&!z?"bg-blue-600 hover:bg-blue-700":"bg-blue-600 opacity-50 cursor-not-allowed"),children:m("common.done")})]})]})})},N=e=>{let{onClose:t,onContinue:s,balanceUsd:l,pool:c}=e,o=(0,i.c3)(),[x,m]=(0,n.useState)(""),u=parseFloat(x),{userId:p,mutate:g}=w(),[j,y]=(0,n.useState)(!1),N=!isNaN(u)&&u>=c.min_invest,[k,z]=(0,n.useState)(!1),[_,C]=(0,n.useState)(0),[S,F]=(0,n.useState)(0),T=(0,n.useMemo)(()=>N?u>l?l:u:0,[u,l,N]),U=e=>{if(!N)return{min:"0.00",max:"0.00"};let[t,s]=c.yield_range;return{min:(u*t*e/100).toFixed(2),max:(u*s*e/100).toFixed(2)}},R=async()=>{b(),y(!0);try{let e=await (0,r.V8)(u,c.name,!0,p);"reinvested"===e.status?(await g(),s(u,e.status)):"partial_hold"===e.status?(F(e.held),C(e.remainder),z(!0)):"request_required"===e.status?(F(0),C(e.remainder),z(!0)):f.oR.error(o("invest.error"))}catch(a){var e,t;let s=(null==(t=a.response)||null==(e=t.data)?void 0:e.detail)||o("invest.error");f.oR.error(s)}finally{y(!1)}};return k?(0,a.jsx)(v,{amount:u,poolName:c.name,remainder:_,held:S,onClose:t,onContinue:s}):(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",children:(0,a.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-zinc-900 p-6 rounded-2xl border border-zinc-700 space-y-4",children:[(0,a.jsxs)("h2",{className:"text-white text-xl font-bold",children:[o("invest.title")," — ",c.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-400 mb-1",children:o("invest.amount")}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*",value:x,onChange:e=>m(e.target.value.replace(/[^0-9.]/g,"")),placeholder:o("invest.enter_amount"),className:"w-full px-4 py-2 rounded-xl bg-zinc-800 text-white border border-zinc-600 focus:outline-none appearance-none"}),(0,a.jsxs)("p",{className:"text-xs text-zinc-400 mt-1",children:[o("invest.minDeposit"),": $",c.min_invest]})]}),N&&(0,a.jsxs)("div",{className:"text-sm text-zinc-300 space-y-1",children:[(0,a.jsxs)("div",{children:[o("invest.your_balance"),": ",(0,a.jsxs)("span",{className:"text-white",children:["$",l.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[o("invest.from_balance"),": ",(0,a.jsxs)("span",{className:"text-green-400",children:["$",T.toFixed(2)]})]}),u>l&&(0,a.jsxs)("div",{children:[o("invest.to_pay"),": ",(0,a.jsxs)("span",{className:"text-red-400",children:["$",(u-l).toFixed(2)]})]})]}),N&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-4 rounded-xl text-sm text-white space-y-1",children:[(0,a.jsxs)("div",{children:[o("invest.profit_day"),": ",U(1).min," – ",U(1).max," USD"]}),(0,a.jsxs)("div",{children:[o("invest.profit_week"),": ",U(7).min," – ",U(7).max," USD"]}),(0,a.jsxs)("div",{children:[o("invest.profit_month"),": ",U(30).min," – ",U(30).max," USD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:()=>{b(),t()},className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:o("common.cancel")}),(0,a.jsx)("button",{onClick:R,disabled:!N||j,className:(0,d.A)("w-1/2 px-4 py-2 rounded-xl text-sm text-white transition",N&&!j?"bg-blue-600 hover:bg-blue-700":"bg-blue-600 opacity-50 cursor-not-allowed"),children:o("common.continue")})]})]})})},k=e=>{let{pool:t,onClose:s,onContinue:l}=e,c=(0,i.c3)(),{userId:o,mutate:x}=w(),[m,u]=(0,n.useState)(""),p=parseFloat(m),[g,j]=(0,n.useState)("basic"),[y,v]=(0,n.useState)(!1),N=!isNaN(p)&&p>0&&p<=t.user_balance,k=async()=>{b(),v(!0);try{let e=await (0,r.tS)(p,t.name,g,"RUB",o);await x(),l(e.final_amount,e.execute_until)}catch(a){var e,s;let t=(null==(s=a.response)||null==(e=s.data)?void 0:e.detail)||c("withdraw.error");f.oR.error(t)}finally{v(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",children:(0,a.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-zinc-900 p-6 rounded-2xl border border-zinc-700 space-y-4",children:[(0,a.jsxs)("h2",{className:"text-white text-xl font-bold",children:[c("withdraw.title")," — ",t.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-400 mb-1",children:c("withdraw.amount")}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*",value:m,onChange:e=>u(e.target.value.replace(/[^0-9.]/g,"")),placeholder:c("withdraw.enter_amount"),className:"w-full px-4 py-2 rounded-xl bg-zinc-800 text-white border border-zinc-600 focus:outline-none appearance-none"}),(0,a.jsxs)("p",{className:"text-xs text-zinc-400 mt-1",children:[c("withdraw.max"),": $",t.user_balance.toFixed(2)]})]}),N&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-300",children:c("withdraw.choose_mode")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("basic"),className:(0,d.A)("flex-1 px-4 py-2 rounded-xl text-sm border","basic"===g?"border-blue-500 text-white":"border-zinc-600 text-zinc-400"),children:c("withdraw.basic")}),(0,a.jsx)("button",{onClick:()=>j("express"),className:(0,d.A)("flex-1 px-4 py-2 rounded-xl text-sm border","express"===g?"border-blue-500 text-white":"border-zinc-600 text-zinc-400"),children:c("withdraw.express")})]}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"basic"===g?c("withdraw.basicDesc"):c("withdraw.expressDesc")})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:()=>{b(),s()},className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:c("common.cancel")}),(0,a.jsx)("button",{onClick:k,disabled:!N||y,className:(0,d.A)("w-1/2 px-4 py-2 rounded-xl text-sm text-white transition",N&&!y?"bg-blue-600 hover:bg-blue-700":"bg-blue-600 opacity-50 cursor-not-allowed"),children:c("common.continue")})]})]})})};var z=s(3385);let _=e=>{let{onClose:t,onContinue:s,balanceUsd:l,pool:c}=e,o=(0,i.c3)("withdraw"),x=(0,i.c3)("common"),m=(0,z.Ym)(),{userId:u,mutate:p}=w(),[g,j]=(0,n.useState)(1),[y,v]=(0,n.useState)(""),N=parseFloat(y),k=!isNaN(N)&&N>0&&(c?N<=(c.user_balance||0):N<=l),_=(0,n.useMemo)(()=>{let e=[{key:"ton",label:"TON"},{key:"usdt",label:"USDT (TON)"},{key:"trx",label:"TRX"}];return"ru"===m&&e.unshift({key:"card",label:o("card")}),e},[m,o]),[C,S]=(0,n.useState)(_[0].key),[F,T]=(0,n.useState)(""),U=F.trim().length>0,R=()=>{b(),j(e=>e+1)},A=()=>{b(),j(e=>e-1)},D=async()=>{b();try{let e=await (0,r.U7)({user_id:u,amount:N,source:"balance",method:C,details:F});await p(),s(e.final_amount,e.execute_until),t()}catch(e){f.oR.error(e.message||o("error"))}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",children:(0,a.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md bg-zinc-900 p-6 rounded-2xl border border-zinc-700 space-y-4",children:[(0,a.jsxs)("h2",{className:"text-white text-xl font-bold",children:[o("title")," ",c?"— ".concat(c.name):""]}),1===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-400 mb-1",children:o("amount")}),(0,a.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*",value:y,onChange:e=>v(e.target.value.replace(/[^0-9.]/g,"")),placeholder:o("enter_amount"),className:"w-full px-4 py-2 rounded-xl bg-zinc-800 text-white border border-zinc-600 focus:outline-none"}),(0,a.jsxs)("p",{className:"text-xs text-zinc-400 mt-1",children:[o("balance"),": $",(c?c.user_balance:l).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:t,className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:x("cancel")}),(0,a.jsx)("button",{onClick:R,disabled:!k,className:(0,d.A)("w-1/2 px-4 py-2 rounded-xl text-sm text-white transition",k?"bg-blue-600 hover:bg-blue-700":"bg-blue-600 opacity-50 cursor-not-allowed"),children:x("next")})]})]}),2===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-zinc-400 mb-2",children:o("choose_currency")}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:_.map(e=>(0,a.jsx)("button",{onClick:()=>{b(),S(e.key)},className:(0,d.A)("py-2 rounded-xl text-sm transition",C===e.key?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400"),children:e.label},e.key))})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:A,className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:x("back")}),(0,a.jsx)("button",{onClick:R,className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-blue-600 text-white hover:bg-blue-700",children:x("next")})]})]}),3===g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-zinc-400 mb-1",children:o("address")}),(0,a.jsx)("input",{type:"text",value:F,onChange:e=>T(e.target.value),placeholder:o("enter_address"),className:"w-full px-4 py-2 rounded-xl bg-zinc-800 text-white border border-zinc-600 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("button",{onClick:A,className:"w-1/2 px-4 py-2 rounded-xl text-sm bg-zinc-700 text-white",children:x("back")}),(0,a.jsx)("button",{onClick:D,disabled:!U,className:(0,d.A)("w-1/2 px-4 py-2 rounded-xl text-sm text-white transition",U?"bg-blue-600 hover:bg-blue-700":"bg-blue-600 opacity-50 cursor-not-allowed"),children:x("continue")})]})]})]})})};var C=s(383);s(1300);var S=s(5695);let F=[{key:"pools",label:"POOLS"},{key:"profile",label:"TEAM"},{key:"info",label:"INFO"}],T=e=>{let{activeTab:t,onTabChange:s}=e;return(0,a.jsx)("div",{className:"relative flex overflow-hidden bg-black rounded-2xl px-[1px] py-[1px]",children:F.map((e,n)=>{let i=e.key===t;return(0,a.jsx)("button",{onClick:()=>{b(),s(e.key)},className:(0,d.A)("flex-1 py-2 text-center font-medium text-sm transition-all duration-200",i?"bg-zinc-900 text-white z-10":"bg-zinc-950 text-zinc-500 z-0 border-b border-zinc-800",0===n&&"rounded-l-2xl",n===F.length-1&&"rounded-r-2xl"),style:{boxShadow:i?"inset 0px -1px 0px #18181b":void 0},children:e.label},e.key)})})};var U=s(1890);function R(){let e=(0,i.c3)(),{userId:t}=w(),[s,l]=(0,n.useState)(null),[r,c]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{t&&(async()=>{try{let e=await fetch("/api/referrals?user_id=".concat(t)),s=await e.json();l(s)}catch(e){console.error("Failed to load referrals:",e)}finally{c(!1)}})()},[t]),r||!s)return null;let o=U.env.NEXT_PUBLIC_BOT_USERNAME||"TradientBot",d="https://t.me/".concat(o,"?start=").concat(s.ref_code);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-2xl bg-zinc-900 border border-zinc-800 px-4 py-3 shadow-sm space-y-3",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:e("team.refLinkLabel")}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-md break-all text-white mr-2 flex-1",children:d}),(0,a.jsx)(y,{value:d})]}),(0,a.jsx)("button",{onClick:()=>{b();let t="https://t.me/share/url?url=".concat(encodeURIComponent(d),"&text=").concat(encodeURIComponent(e("team.shareText")));window.open(t,"_blank")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-4 py-2 text-sm font-medium",children:e("team.send")})]}),(0,a.jsxs)("div",{className:"rounded-2xl bg-zinc-900 border border-zinc-800 px-4 py-3 shadow-sm space-y-1",children:[(0,a.jsx)("h2",{className:"text-white font-semibold text-base",children:e("team.title")}),(0,a.jsx)("p",{className:"text-sm text-zinc-400 leading-snug",children:e("team.description")}),s.levels&&s.levels.length>0?s.levels.map(t=>(0,a.jsxs)("div",{className:"flex justify-between text-sm text-white border-t border-zinc-800 pt-2",children:[(0,a.jsx)("span",{className:"font-medium",children:e("team.levelLine",{level:t.level,count:t.count})}),(0,a.jsxs)("span",{className:"text-green-400 font-semibold",children:["+$",t.earned.toFixed(2)]})]},t.level)):(0,a.jsx)("div",{className:"text-sm text-zinc-400 pt-2",children:e("team.noRefs")}),(0,a.jsxs)("div",{className:"border-t border-zinc-800 mt-2 pt-2 flex justify-between text-white font-semibold",children:[(0,a.jsxs)("span",{children:[e("team.totalEarned"),":"]}),(0,a.jsxs)("span",{className:"text-green-400 font-semibold",children:["$",s.total_earned.toFixed(2)]})]})]})]})}var A=s(7650);function D(){let e=(0,i.c3)(),{profile:t,mutate:s}=w(),l=(0,S.useRouter)(),r=(0,S.usePathname)(),[c,o]=(0,n.useState)(!1),[d,x]=(0,n.useState)(null),m=(0,n.useRef)(null),[u,b]=(0,n.useState)({top:0,left:0,width:0});(0,n.useEffect)(()=>{var e,t,s,a;x(null==(a=window)||null==(s=a.Telegram)||null==(t=s.WebApp)||null==(e=t.initDataUnsafe)?void 0:e.user)},[]),(0,n.useEffect)(()=>{if(c&&m.current){let e=m.current.getBoundingClientRect();b({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}},[c]);let p=async e=>{var a;o(!1);let n=null!=(a=null==d?void 0:d.id)?a:null==t?void 0:t.user_id;try{let t=await fetch("/api/user/language",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,lang:e})});if(!t.ok)throw Error((await t.json()).detail||"Error");await s();let a=r.split("/");a[1]=e,await l.replace(a.join("/"))}catch(e){console.error("[LangChange] failed:",e)}};if(!t||!d)return null;let f=d.photo_url||"",g=d.username,j=d.id;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6 pb-[calc(7rem+env(safe-area-inset-bottom))]",children:[(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"rounded-2xl bg-zinc-900/80 backdrop-blur-sm border border-zinc-800 px-5 py-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[f?(0,a.jsx)("img",{src:f,onError:e=>{e.currentTarget.style.display="none"},className:"w-14 h-14 rounded-full border border-zinc-700"}):(0,a.jsx)("div",{className:"w-14 h-14 rounded-full bg-zinc-700"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-white font-semibold text-lg",children:["@",g]}),(0,a.jsxs)("div",{className:"text-sm text-zinc-400",children:["ID: ",j]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,a.jsxs)("div",{ref:m,className:"relative",children:[" ",(0,a.jsxs)("button",{onClick:()=>o(e=>!e),className:"flex w-full items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 transition text-sm text-white py-2 rounded-xl",children:[(0,a.jsx)("img",{src:"/icons/lang.svg",className:"w-5 h-5",alt:"lang"}),e("common.switchLanguage")]})]}),(0,a.jsxs)("button",{className:"flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 transition text-sm text-white py-2 rounded-xl",children:[(0,a.jsx)("img",{src:"/icons/history.svg",className:"w-5 h-5",alt:"history"}),"История"]})]})]}),(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},className:"rounded-2xl bg-zinc-900/80 backdrop-blur-sm border border-zinc-800 px-5 py-5 shadow-sm space-y-2",children:[(0,a.jsx)("div",{className:"text-white font-semibold text-base",children:e("info.title")}),(0,a.jsxs)("div",{className:"flex justify-between text-base text-zinc-400",children:[(0,a.jsx)("span",{children:e("info.deposit")}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["$",(t.deposit_usd||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-base text-zinc-400",children:[(0,a.jsx)("span",{children:e("info.withdraw")}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["$",(t.withdraw_usd||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-base text-zinc-400",children:[(0,a.jsx)("span",{children:e("info.profitTotal")}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["$",(t.total_earned_usd||0).toFixed(2)]})]})]}),(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},className:"rounded-2xl bg-zinc-900/80 backdrop-blur-sm border border-zinc-800 px-5 py-5 shadow-sm space-y-4",children:[(0,a.jsx)("h2",{className:"text-white font-semibold text-lg text-center",children:e("info.title")}),(0,a.jsx)("img",{src:"/images/legend.png",alt:"legend",className:"w-full max-w-[280px] mx-auto rounded-xl"}),(0,a.jsx)("p",{className:"text-sm text-zinc-300 leading-relaxed whitespace-pre-line",children:e("info.legend")})]}),(0,a.jsxs)("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-zinc-800 px-4 py-3 flex justify-center gap-8",children:[(0,a.jsxs)("a",{href:"https://t.me/TradientChat",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-white hover:underline",children:[(0,a.jsx)("img",{src:"/icons/telegram.webp",alt:"tg",className:"w-5 h-5"}),(0,a.jsx)("span",{children:e("info.chat")})]}),(0,a.jsxs)("a",{href:"https://t.me/TradientSupport",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-white hover:underline",children:[(0,a.jsx)("img",{src:"/icons/telegram.webp",alt:"tg",className:"w-5 h-5"}),(0,a.jsx)("span",{children:e("info.support")})]})]})]}),c&&(0,A.createPortal)((0,a.jsx)("div",{style:{position:"absolute",top:u.top,left:u.left,width:u.width},className:"z-50 bg-zinc-900 border border-zinc-700 rounded-xl shadow-lg overflow-hidden",children:["ru","en","uk"].map(e=>{let s="ru"===e?"\uD83C\uDDF7\uD83C\uDDFA Русский":"en"===e?"\uD83C\uDDFA\uD83C\uDDF8 English":"\uD83C\uDDFA\uD83C\uDDE6 Українська",n=t.lang===e;return(0,a.jsx)("button",{onClick:()=>p(e),className:"block w-full text-left px-4 py-2 text-sm hover:bg-zinc-800 transition ".concat(n?"text-white font-semibold":"text-zinc-400"),children:s},e)})}),document.body)]})}function E(){(0,i.c3)();let e=(0,S.useRouter)(),t=(0,S.useParams)(),c=(0,l.P)(e=>e.token),[o,d]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[f,w]=(0,n.useState)(null),[g,j]=(0,n.useState)(0),[y,v]=(0,n.useState)(!1),[z,F]=(0,n.useState)(null),[U,A]=(0,n.useState)(!1),[E,O]=(0,n.useState)(null),[P,$]=(0,n.useState)("pools");(0,n.useEffect)(()=>{c&&(async()=>{p(!0);try{var e,t;let a=(await s.e(728).then(s.bind(s,7728))).default;a.MainButton.hide();let n=null==(t=a.initDataUnsafe)||null==(e=t.user)?void 0:e.id;if(!n)return void console.warn("Telegram user ID not found");let i=await (0,r.eO)();w(i.profit_usd);let l=await (0,r.EM)(n);d(l)}catch(e){console.error("fetch failed:",e)}finally{p(!1)}})()},[c,g]);let L=e=>{b(),O(e),A(!0)},M=(e,t)=>{A(!1),j(e=>e+1),alert("Заявка создана. С учетом комиссии вы получите $".concat(e.toFixed(2),". Ожидается зачисление до ").concat(new Date(t).toLocaleDateString(),"."))},B=async(e,t)=>{var s,a,n,i;b(),d(s=>s.map(s=>s.name===e.name?{...s,reinvest:t}:s));let l=null==(i=window.Telegram)||null==(n=i.WebApp)||null==(a=n.initDataUnsafe)||null==(s=a.user)?void 0:s.id;if(!l)return void console.warn("❌ Нет Telegram user ID");try{await (0,r.NF)(l,e.name,t),console.log("✅ Обновлено в БД")}catch(e){console.error("❌ Ошибка при обновлении reinvest в БД:",e)}},I=e=>{b(),F(e),v(!0)};return(0,a.jsxs)("div",{className:"min-h-screen bg-zinc-900 text-white",children:[(0,a.jsx)(u,{balanceUsd:null!=f?f:0,onWithdraw:()=>{b(),O(null),A(!0)},onLanguageSwitch:()=>{b();let s=t.locale||"ru";e.replace("/".concat("ru"===s?"en":"ru"))}}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(T,{activeTab:P,onTabChange:$}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:["pools"===P&&(m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{height:120,borderRadius:16}),(0,a.jsx)(C.A,{height:120,borderRadius:16})]}):o.map(e=>(0,a.jsx)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)(x,{pool:e,onInvest:I,onWithdraw:L,onToggleReinvest:B})},e.name))),"profile"===P&&(0,a.jsx)(R,{}),"info"===P&&(0,a.jsx)(D,{})]})]}),U&&(E?(0,a.jsx)(k,{pool:E,onClose:()=>A(!1),onContinue:M}):(0,a.jsx)(_,{balanceUsd:f,onClose:()=>A(!1),onContinue:M})),y&&z&&(0,a.jsx)(N,{pool:z,balanceUsd:null!=f?f:0,onClose:()=>v(!1),onContinue:(e,t)=>{v(!1),"reinvested"===t?j(e=>e+1):alert("Заявка создана. Ожидайте зачисления.")}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[445,507,270,441,684,358],()=>t(3960)),_N_E=e.O()}]);